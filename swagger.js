const swaggerAutogen = require('swagger-autogen')({openapi: '3.0.0'})

const doc = {
    info: {
        version: "1.0.0",
        title: "Social Media API",
        description: "Documentation automatically generated by the <b>swagger-autogen</b> module."
    },
    host: "localhost:3000",
    basePath: "/",
    schemes: ['http', 'https'],
    consumes: ['application/json'],
    produces: ['application/json'],
    tags: [
        {
            "name": "User",
            "description": "Endpoints"
        },
        {
            "name": "Post",
            "description": "Endpoints"
        },
        {
            "name": "Like",
            "description": "Endpoints"
        }
    ],
    securityDefinitions: {
        apiKeyAuth:{
            type: "apiKey",
            in: "header",       
            name: "X-API-KEY",  
            description: "any description..."
        }
    },
    definitions: {
        User:{
            $name: "ali",
            $username: "username1",
            age: 29,
            $email: "felan@felan.com",
            $phoneNumber:"01234567890",
            $password: "password",
            posts: [{
                $ref: '#/definitions/Post'
            }]
        },
        Post:{
            $title: "title",
            $text: "sample text for the post...",
            $author: {
                description: "only the author's id is saved in model",
                $ref: "#/definitions/User"
            },
            likes:[{
                description: "only the likes' ids are saved in model",
                $ref: "#/definitions/Like"
            }]
        },
        Like:{
            $postId: {
                description: "only id is saved",
                $ref: "#/definitions/Post"
            },
            $userId: {
                description: "only id is saved",
                $ref: "#/definitions/User"
            },
        }

    }
}


const outputFile = './swagger-output.json'
const endpointsFiles = ['./index.js']

swaggerAutogen(outputFile, endpointsFiles, doc);